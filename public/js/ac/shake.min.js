(function(b,a){if(typeof define==="function"&&define.amd){define(function(){return a(b,b.document)})}else{if(typeof module!=="undefined"&&module.exports){module.exports=a(b,b.document)}else{b.Shake=a(b,b.document)}}}(typeof window!=="undefined"?window:this,function(b,a){function c(d){this.hasDeviceMotion="ondevicemotion" in b;this.options={threshold:15,timeout:1000};if(typeof d==="object"){for(var e in d){if(d.hasOwnProperty(e)){this.options[e]=d[e]}}}this.lastTime=new Date();this.lastX=null;this.lastY=null;this.lastZ=null;if(typeof a.CustomEvent==="function"){this.event=new a.CustomEvent("shake",{bubbles:true,cancelable:true})}else{if(typeof a.createEvent==="function"){this.event=a.createEvent("Event");this.event.initEvent("shake",true,true)}else{return false}}}c.prototype.reset=function(){this.lastTime=new Date();this.lastX=null;this.lastY=null;this.lastZ=null};c.prototype.start=function(){this.reset();if(this.hasDeviceMotion){b.addEventListener("devicemotion",this,false)}};c.prototype.stop=function(){if(this.hasDeviceMotion){b.removeEventListener("devicemotion",this,false)}this.reset()};c.prototype.devicemotion=function(j){var i=j.accelerationIncludingGravity;var h;var g;var f=0;var d=0;var k=0;if((this.lastX===null)&&(this.lastY===null)&&(this.lastZ===null)){this.lastX=i.x;this.lastY=i.y;this.lastZ=i.z;return}f=Math.abs(this.lastX-i.x);d=Math.abs(this.lastY-i.y);k=Math.abs(this.lastZ-i.z);if(((f>this.options.threshold)&&(d>this.options.threshold))||((f>this.options.threshold)&&(k>this.options.threshold))||((d>this.options.threshold)&&(k>this.options.threshold))){h=new Date();g=h.getTime()-this.lastTime.getTime();if(g>this.options.timeout){b.dispatchEvent(this.event);this.lastTime=new Date()}}this.lastX=i.x;this.lastY=i.y;this.lastZ=i.z};c.prototype.handleEvent=function(d){if(typeof(this[d.type])==="function"){return this[d.type](d)}};return c}));
